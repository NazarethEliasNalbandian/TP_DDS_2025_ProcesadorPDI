# Perfil por defecto: H2
spring.profiles.default=h2

# JPA (genérico)
spring.jpa.show-sql=true

# Actuator
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always

# DevTools
spring.devtools.restart.enabled=true

# Render recomienda escuchar en el puerto definido por PORT
server.port=${PORT:8080}

# Config propia (común a todos los perfiles)
solicitudes.base-url=${URL_SOLICITUDES:https://two025-tp-entrega-2-jenniferfabflores.onrender.com/}

## Habilitar exportación de métricas a Datadog
management.datadog.metrics.export.enabled=true

management.datadog.metrics.export.apiKey=${DD_API_KEY}
management.datadog.metrics.export.step=60s
management.datadog.metrics.export.uri=https://api.us5.datadoghq.com
#
## Región de Datadog (US1 = datadoghq.com, EU1 = datadoghq.eu, etc.)
#management.datadog.uri=https://api.${DD_SITE:datadoghq.com}/
#
## Frecuencia de envío de métricas
management.datadog.step=60s

# tu código
logging.level.ar.edu.utn.dds.k3003.clients=DEBUG

logging.level.root=INFO
logging.level.ar.edu.utn.dds.k3003=DEBUG


# Retrofit/OkHttp (para ver requests/responses)
logging.level.okhttp3=INFO
logging.level.retrofit2=INFO

# OCR.space
ocr.base-url=https://api.ocr.space/parse/imageurl
ocr.apikey=${OCR_API_KEY:}

# Apilayer Image Labeling
imglbl.base-url=https://api.apilayer.com/image_labeling/url
imglbl.apikey=${IMGLBL_API_KEY:}

# Habilitadores (útiles en dev/local)
features.ocr.enabled=true
features.imglbl.enabled=true

# --- Configuración de timeouts para Apilayer ---
# Tiempo máximo de conexión (ms)
imglbl.timeout.connect-ms=3000
# Tiempo máximo de lectura de la respuesta (ms)
imglbl.timeout.read-ms=10000

# --- Configuración de reintentos ---
# Número máximo de intentos (incluido el primero)
imglbl.retry.max-attempts=3
# Backoff inicial en ms (luego se multiplica por 2 en cada intento)
imglbl.retry.base-backoff-ms=600

# =============================
# RABBITMQ CONFIG (CloudAMQP)
# =============================
# =============================
# ? RabbitMQ CloudAMQP
# =============================

spring.rabbitmq.addresses=amqps://pilwyxdw:G8EYYMZ_f_GU1pTzQZO9pWXl7_IPYFX0@beaver.rmq.cloudamqp.com/pilwyxdw
spring.rabbitmq.ssl.enabled=true
spring.rabbitmq.ssl.algorithm=TLSv1.2
spring.rabbitmq.connection-timeout=5000
spring.rabbitmq.requested-heartbeat=30
spring.rabbitmq.publisher-confirm-type=correlated

# =============================
# ? Exchange / Queue defaults
# =============================
queue.name=pdi.to.process
spring.rabbitmq.template.exchange=pdi.direct
spring.rabbitmq.template.routing-key=pdi.process

# =============================
# ? Logging & Retry
# =============================
spring.rabbitmq.listener.simple.retry.enabled=true
spring.rabbitmq.listener.simple.retry.max-attempts=3
spring.rabbitmq.listener.simple.retry.initial-interval=3000
spring.rabbitmq.listener.simple.retry.multiplier=2.0
spring.rabbitmq.listener.simple.retry.max-interval=10000

logging.level.org.springframework.amqp=INFO
logging.level.org.springframework.amqp.rabbit.connection=INFO

# Configurar concurrencia del listener
spring.rabbitmq.listener.simple.concurrency=3
spring.rabbitmq.listener.simple.max-concurrency=6
spring.rabbitmq.listener.simple.prefetch=1

# URL base del mÃ³dulo Fuentes (terminada en /)
URL_FUENTES=https://tp-anual-dds-fuentes.onrender.com/api/
fuentes.base-url=https://tp-anual-dds-fuentes.onrender.com/api



